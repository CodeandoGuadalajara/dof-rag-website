---
import '../styles/global.css';

interface Props {
	title?: string;
}

const { title = 'DOF-RAG Blog' } = Astro.props;
---

<!doctype html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<link rel="alternate" type="application/rss+xml" title="DOF-RAG Blog RSS Feed" href="/rss.xml" />
		<title>{title}</title>
		<!-- Prevenir el flash de tema incorrecto -->
		<script is:inline>
			// Check localStorage first
			const savedTheme = localStorage.getItem('theme');
			
			// If there's a saved preference, use it
			if (savedTheme === 'light') {
				document.documentElement.classList.add('light-theme');
			} else if (savedTheme === 'dark') {
				document.documentElement.classList.remove('light-theme');
			} else {
				// If no saved preference, check system preference
				const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
				if (!prefersDark) {
					document.documentElement.classList.add('light-theme');
				}
			}
		</script>
	</head>
	<body>
		<header class="border-b border-[var(--color-border)] py-4 sticky top-0 backdrop-blur-md z-10" style="background-color: rgba(var(--color-bg-rgb), 0.8);">
			<div class="container flex justify-between items-center">
				<a href="/" class="text-2xl font-bold flex items-center">
					<span class="gradient-text">DOF-RAG</span>
				</a>
				<nav class="flex items-center gap-6">
					<a href="/" class="hover:text-[var(--color-accent)]">Inicio</a>
					<a href="/about" class="hover:text-[var(--color-accent)]">Acerca de</a>
					<button id="theme-toggle" class="p-2 rounded-full hover:bg-[var(--color-border)] ml-2">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" id="moon-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
						</svg>
						<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden" id="sun-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
						</svg>
					</button>
				</nav>
			</div>
		</header>
		<main class="container py-12">
			<slot />
		</main>
		<footer class="py-8 border-t border-[var(--color-border)] mt-20">
			<div class="container">
				<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
					<div>
						<h3 class="text-xl font-bold mb-4 gradient-text">DOF-RAG</h3>
						<p class="text-[var(--color-muted)]">
							Proyecto de investigación para el procesamiento y análisis de información del Diario Oficial de la Federación.
						</p>
					</div>
					<div>
						<h3 class="text-lg font-bold mb-4">Recursos</h3>
						<ul class="space-y-2">
							<li><a href="/" class="text-[var(--color-muted)] hover:text-[var(--color-accent)]">Blog</a></li>
							<li><a href="/about" class="text-[var(--color-muted)] hover:text-[var(--color-accent)]">Acerca de</a></li>
							<li><a href="/rss.xml" class="text-[var(--color-muted)] hover:text-[var(--color-accent)] flex items-center">
								<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="currentColor" viewBox="0 0 24 24">
									<path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"/>
								</svg>
								RSS
							</a></li>
						</ul>
					</div>
					<div>
						<h3 class="text-lg font-bold mb-4">Contacto</h3>
						<p class="text-[var(--color-muted)]">
							Correo: <a href="mailto:contacto@dofrag.mx" class="text-[var(--color-accent)] hover:underline">contacto@dofrag.mx</a>
						</p>
					</div>
				</div>
				
				<div class="mt-8 border-t border-[var(--color-border)] pt-8">
					<div class="flex flex-col md:flex-row justify-between items-center">
						<p class="text-[var(--color-muted)] text-sm mb-4 md:mb-0">© {new Date().getFullYear()} DOF-RAG Project. Todos los derechos reservados.</p>
						<div class="flex items-center">
							<span class="text-[var(--color-muted)] text-sm mr-3">Suscríbete:</span>
							<a href="/rss.xml" class="flex items-center text-[var(--color-accent)] hover:underline" aria-label="RSS Feed">
								<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
									<path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"/>
								</svg>
								<span class="ml-1">RSS</span>
							</a>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</body>
</html>

<script>
	// Tema oscuro/claro
	const themeToggle = document.getElementById('theme-toggle');
	const sunIcon = document.getElementById('sun-icon');
	const moonIcon = document.getElementById('moon-icon');
	
	// Set initial state of the toggle based on current theme
	if (document.documentElement.classList.contains('light-theme')) {
		document.body.classList.add('light-theme');
		moonIcon?.classList.add('hidden');
		sunIcon?.classList.remove('hidden');
	}
	
	themeToggle?.addEventListener('click', () => {
		document.body.classList.toggle('light-theme');
		document.documentElement.classList.toggle('light-theme'); // Sincronizar con HTML
		sunIcon?.classList.toggle('hidden');
		moonIcon?.classList.toggle('hidden');
		
		// Guardar preferencia
		if (document.body.classList.contains('light-theme')) {
			localStorage.setItem('theme', 'light');
		} else {
			localStorage.setItem('theme', 'dark');
		}
	});
</script>

<style>
	html {
		scroll-behavior: smooth;
	}
</style>
